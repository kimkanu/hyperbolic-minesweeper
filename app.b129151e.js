parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"wjrn":[function(require,module,exports) {
"use strict";function e(e){return e}function r(e){return function(r){return!e(r)}}function t(e){return function(){return e}}function n(e){return function(r,t){return e(t,r)}}function s(e,r,t,n,s,o,u,c,p){switch(arguments.length){case 1:return e;case 2:return function(){return r(e.apply(this,arguments))};case 3:return function(){return t(r(e.apply(this,arguments)))};case 4:return function(){return n(t(r(e.apply(this,arguments))))};case 5:return function(){return s(n(t(r(e.apply(this,arguments)))))};case 6:return function(){return o(s(n(t(r(e.apply(this,arguments))))))};case 7:return function(){return u(o(s(n(t(r(e.apply(this,arguments)))))))};case 8:return function(){return c(u(o(s(n(t(r(e.apply(this,arguments))))))))};case 9:return function(){return p(c(u(o(s(n(t(r(e.apply(this,arguments)))))))))}}}function o(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e}function u(e){return e+1}function c(e){return e-1}function p(e){throw new Error("Called `absurd` function which should be uncallable")}function i(e){return function(r){return e.apply(void 0,r)}}function a(e){return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return e(r)}}function x(e,r,t,n,s,o,u,c,p,i,a,x,f,l,d,h,y,b,v,w){switch(arguments.length){case 1:return e;case 2:return r(e);case 3:return t(r(e));case 4:return n(t(r(e)));case 5:return s(n(t(r(e))));case 6:return o(s(n(t(r(e)))));case 7:return u(o(s(n(t(r(e))))));case 8:return c(u(o(s(n(t(r(e)))))));case 9:return p(c(u(o(s(n(t(r(e))))))));case 10:return i(p(c(u(o(s(n(t(r(e)))))))));case 11:return a(i(p(c(u(o(s(n(t(r(e))))))))));case 12:return x(a(i(p(c(u(o(s(n(t(r(e)))))))))));case 13:return f(x(a(i(p(c(u(o(s(n(t(r(e))))))))))));case 14:return l(f(x(a(i(p(c(u(o(s(n(t(r(e)))))))))))));case 15:return d(l(f(x(a(i(p(c(u(o(s(n(t(r(e))))))))))))));case 16:return h(d(l(f(x(a(i(p(c(u(o(s(n(t(r(e)))))))))))))));case 17:return y(h(d(l(f(x(a(i(p(c(u(o(s(n(t(r(e))))))))))))))));case 18:return b(y(h(d(l(f(x(a(i(p(c(u(o(s(n(t(r(e)))))))))))))))));case 19:return v(b(y(h(d(l(f(x(a(i(p(c(u(o(s(n(t(r(e))))))))))))))))));case 20:return w(v(b(y(h(d(l(f(x(a(i(p(c(u(o(s(n(t(r(e)))))))))))))))))))}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.bindTo_=exports.bind_=exports.hole=exports.pipe=exports.untupled=exports.tupled=exports.absurd=exports.decrement=exports.increment=exports.tuple=exports.flow=exports.flip=exports.constVoid=exports.constUndefined=exports.constNull=exports.constFalse=exports.constTrue=exports.constant=exports.not=exports.unsafeCoerce=exports.identity=void 0,exports.identity=e,exports.unsafeCoerce=e,exports.not=r,exports.constant=t,exports.constTrue=t(!0),exports.constFalse=t(!1),exports.constNull=t(null),exports.constUndefined=t(void 0),exports.constVoid=exports.constUndefined,exports.flip=n,exports.flow=s,exports.tuple=o,exports.increment=u,exports.decrement=c,exports.absurd=p,exports.tupled=i,exports.untupled=a,exports.pipe=x,exports.hole=p;var f=function(e,r,t){var n;return Object.assign({},e,((n={})[r]=t,n))};exports.bind_=f;var l=function(e){return function(r){var t;return(t={})[e]=r,t}};exports.bindTo_=l;
},{}],"XpGZ":[function(require,module,exports) {
"use strict";function t(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-8;return function(n){var o=e-t,a=(function(t,e){return t-e*Math.floor(t/e)}(n-t,o)||o)+t;return Math.abs(a-t)<=r?e:a}}function e(t,e){return function(r){return Math.max(t,Math.min(e,r))}}function r(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-8;return Math.abs(t-e)<=r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.eq=exports.clamp=exports.clampMod=void 0,exports.clampMod=t,exports.clamp=e,exports.eq=r;
},{}],"hxGZ":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function i(e){var t=l();return function(){var n,o=p(e);if(t){var r=p(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return u(this,n)}}function u(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?c(t):n}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||!d(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return s(e,arguments,p(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,e)})(e)}function s(e,t,n){return(s=l()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&f(r,n.prototype),r}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function d(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.PointerManager=exports.PointerClickEvent=exports.PointerLockChangeEvent=exports.PointerPositionChangeEvent=void 0;var m=require("~utils/math"),v=function(e){r(n,a(Event));var t=i(n);function n(e,r){var i,u=e.x,c=e.y;return o(this,n),(i=t.call(this,"pointerpositionchange",r)).x=u,i.y=c,i}return n}();exports.PointerPositionChangeEvent=v;var y=function(e){r(n,a(Event));var t=i(n);function n(e,r){var i;return o(this,n),(i=t.call(this,"pointerlockchange",r)).locked=e,i}return n}();exports.PointerLockChangeEvent=y;var h=function(e){r(n,a(Event));var t=i(n);function n(e,r){var i,u=e.x,c=e.y,a=e.buttons;return o(this,n),(i=t.call(this,"pointerclick",r)).x=u,i.y=c,i.buttons=a,i}return n}();exports.PointerClickEvent=h;var b=function(e){r(u,a(EventTarget));var t=i(u);function u(){var e;return o(this,u),(e=t.call(this)).originalX=0,e.originalY=0,e.lastLockedX=0,e.lastLockedY=0,e.x=0,e.y=0,e.locked=!1,e.buttons=0,e.setPointerPosition=function(t,n){e.x=m.clamp(0,window.innerWidth)(t),e.y=m.clamp(0,window.innerHeight)(n),e.dispatchEvent(new v({x:e.x,y:e.y}))},e._pointerLockChangeHandler=function(){e.locked=!e.locked,e.dispatchEvent(new y(e.locked)),e.locked?(document.addEventListener("mousemove",e._mousemoveHandler,!1),document.addEventListener("mousedown",e._mousedownHandler,!1),document.addEventListener("mouseup",e._mouseupHandler,!1)):(e.setPointerPosition(e.originalX,e.originalY),document.removeEventListener("mousemove",e._mousemoveHandler,!1),document.removeEventListener("mousedown",e._mousedownHandler,!1),document.removeEventListener("mouseup",e._mouseupHandler,!1))},e._mousemoveHandler=function(t){e.lastLockedX=m.clamp(0,window.innerWidth)(e.x+t.movementX),e.lastLockedY=m.clamp(0,window.innerHeight)(e.y+t.movementY),e.setPointerPosition(e.lastLockedX,e.lastLockedY)},e._mousedownHandler=function(t){e.buttons=t.buttons},e._mouseupHandler=function(t){0!==e.buttons&&(e.dispatchEvent(new h({x:t.clientX,y:t.clientY,buttons:e.buttons})),e.buttons=0)},document.addEventListener("mousemove",function(t){e.locked||(e.originalX=t.clientX,e.originalY=t.clientY,e.setPointerPosition(t.clientX,t.clientY))}),document.addEventListener("mousedown",e._mousedownHandler),document.addEventListener("mouseup",e._mouseupHandler),"onpointerlockchange"in document?document.addEventListener("pointerlockchange",e._pointerLockChangeHandler,!1):"onmozpointerlockchange"in document&&document.addEventListener("mozpointerlockchange",e._pointerLockChangeHandler,!1),e}return n(u,[{key:"lock",value:function(){document.body.requestPointerLock?document.body.requestPointerLock():document.body.mozRequestPointerLock&&document.body.mozRequestPointerLock()}},{key:"unlock",value:function(){document.exitPointerLock?document.exitPointerLock():document.mozExitPointerLock&&document.mozExitPointerLock()}}]),u}();exports.PointerManager=b;
},{"~utils/math":"XpGZ"}],"J4Nk":[function(require,module,exports) {
"use strict";var r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;function n(r){if(null==r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function o(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(r){return t[r]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(r){n[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(o){return!1}}module.exports=o()?Object.assign:function(o,c){for(var a,i,s=n(o),f=1;f<arguments.length;f++){for(var u in a=Object(arguments[f]))t.call(a,u)&&(s[u]=a[u]);if(r){i=r(a);for(var b=0;b<i.length;b++)e.call(a,i[b])&&(s[i[b]]=a[i[b]])}}return s};
},{}],"rd3l":[function(require,module,exports) {
module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};
},{}],"fCKU":[function(require,module,exports) {
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}],"pBGv":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"XOAc":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process"),r=/%[sdj%]/g;exports.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,s=o.length,u=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return e}}),c=o[n];n<s;c=o[++n])h(c)||!z(c)?u+=" "+c:u+=" "+i(c);return u},exports.deprecate=function(r,n){if(j(e.process))return function(){return exports.deprecate(r,n).apply(this,arguments)};if(!0===t.noDeprecation)return r;var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}};var n,o={};function i(e,t){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),x(t)?r.showHidden=t:t&&exports._extend(r,t),j(r.showHidden)&&(r.showHidden=!1),j(r.depth)&&(r.depth=2),j(r.colors)&&(r.colors=!1),j(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),p(r,e,r.depth)}function s(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function u(e,t){return e}function c(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function p(e,t,r){if(e.customInspect&&t&&D(t.inspect)&&t.inspect!==exports.inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return v(n)||(n=p(e,n,r)),n}var o=l(e,t);if(o)return o;var i=Object.keys(t),s=c(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),E(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return a(t);if(0===i.length){if(D(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(O(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(w(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return a(t)}var x,h="",b=!1,m=["{","}"];(d(t)&&(b=!0,m=["[","]"]),D(t))&&(h=" [Function"+(t.name?": "+t.name:"")+"]");return O(t)&&(h=" "+RegExp.prototype.toString.call(t)),w(t)&&(h=" "+Date.prototype.toUTCString.call(t)),E(t)&&(h=" "+a(t)),0!==i.length||b&&0!=t.length?r<0?O(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),x=b?f(e,t,r,s,i):i.map(function(n){return g(e,t,r,s,n,b)}),e.seen.pop(),y(x,h,m)):m[0]+h+m[1]}function l(e,t){if(j(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return m(t)?e.stylize(""+t,"number"):x(t)?e.stylize(""+t,"boolean"):h(t)?e.stylize("null","null"):void 0}function a(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,o){for(var i=[],s=0,u=t.length;s<u;++s)$(t,String(s))?i.push(g(e,t,r,n,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(g(e,t,r,n,o,!0))}),i}function g(e,t,r,n,o,i){var s,u,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),$(n,o)||(s="["+o+"]"),u||(e.seen.indexOf(c.value)<0?(u=h(r)?p(e,c.value,null):p(e,c.value,r-1)).indexOf("\n")>-1&&(u=i?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),j(s)){if(i&&o.match(/^\d+$/))return u;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function y(e,t,r){return e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function x(e){return"boolean"==typeof e}function h(e){return null===e}function b(e){return null==e}function m(e){return"number"==typeof e}function v(e){return"string"==typeof e}function S(e){return"symbol"==typeof e}function j(e){return void 0===e}function O(e){return z(e)&&"[object RegExp]"===A(e)}function z(e){return"object"==typeof e&&null!==e}function w(e){return z(e)&&"[object Date]"===A(e)}function E(e){return z(e)&&("[object Error]"===A(e)||e instanceof Error)}function D(e){return"function"==typeof e}function N(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function A(e){return Object.prototype.toString.call(e)}function J(e){return e<10?"0"+e.toString(10):e.toString(10)}exports.debuglog=function(e){if(j(n)&&(n=""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(n)){var r=t.pid;o[e]=function(){var t=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,r,t)}}else o[e]=function(){};return o[e]},exports.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=d,exports.isBoolean=x,exports.isNull=h,exports.isNullOrUndefined=b,exports.isNumber=m,exports.isString=v,exports.isSymbol=S,exports.isUndefined=j,exports.isRegExp=O,exports.isObject=z,exports.isDate=w,exports.isError=E,exports.isFunction=D,exports.isPrimitive=N,exports.isBuffer=require("./support/isBuffer");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function H(){var e=new Date,t=[J(e.getHours()),J(e.getMinutes()),J(e.getSeconds())].join(":");return[e.getDate(),R[e.getMonth()],t].join(" ")}function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}exports.log=function(){console.log("%s - %s",H(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,t){if(!t||!z(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};
},{"./support/isBuffer":"rd3l","inherits":"fCKU","process":"pBGv"}],"DlZn":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3],e=require("object-assign");function r(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}function n(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var i=require("util/"),o=Object.prototype.hasOwnProperty,u=Array.prototype.slice,a="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function f(e){return!n(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var s=module.exports=q,l=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(i.isFunction(t)){if(a)return t.name;var e=t.toString().match(l);return e&&e[1]}}function g(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function E(t){if(a||!i.isFunction(t))return i.inspect(t);var e=p(t);return"[Function"+(e?": "+e:"")+"]"}function h(t){return g(E(t.actual),128)+" "+t.operator+" "+g(E(t.expected),128)}function y(t,e,r,n,i){throw new s.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function q(t,e){t||y(t,!0,e,"==",s.ok)}function d(t,e,o,u){if(t===e)return!0;if(n(t)&&n(e))return 0===r(t,e);if(i.isDate(t)&&i.isDate(e))return t.getTime()===e.getTime();if(i.isRegExp(t)&&i.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(f(t)&&f(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(n(t)!==n(e))return!1;var a=(u=u||{actual:[],expected:[]}).actual.indexOf(t);return-1!==a&&a===u.expected.indexOf(e)||(u.actual.push(t),u.expected.push(e),b(t,e,o,u))}return o?t===e:t==e}function m(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function b(t,e,r,n){if(null==t||null==e)return!1;if(i.isPrimitive(t)||i.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=m(t),a=m(e);if(o&&!a||!o&&a)return!1;if(o)return d(t=u.call(t),e=u.call(e),r);var c,f,s=A(t),l=A(e);if(s.length!==l.length)return!1;for(s.sort(),l.sort(),f=s.length-1;f>=0;f--)if(s[f]!==l[f])return!1;for(f=s.length-1;f>=0;f--)if(!d(t[c=s[f]],e[c],r,n))return!1;return!0}function v(t,e,r){d(t,e,!0)&&y(t,e,r,"notDeepStrictEqual",v)}function x(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(r){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function S(t){var e;try{t()}catch(r){e=r}return e}function w(t,e,r,n){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),o=S(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!o&&y(o,r,"Missing expected exception"+n);var u="string"==typeof n,a=!t&&o&&!r;if((!t&&i.isError(o)&&u&&x(o,r)||a)&&y(o,r,"Got unwanted exception"+n),t&&o&&r&&!x(o,r)||!t&&o)throw o}function O(t,e){t||y(t,!0,e,"==",O)}s.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=h(this),this.generatedMessage=!0);var e=t.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=p(e),o=n.indexOf("\n"+i);if(o>=0){var u=n.indexOf("\n",o+1);n=n.substring(u+1)}this.stack=n}}},i.inherits(s.AssertionError,Error),s.fail=y,s.ok=q,s.equal=function(t,e,r){t!=e&&y(t,e,r,"==",s.equal)},s.notEqual=function(t,e,r){t==e&&y(t,e,r,"!=",s.notEqual)},s.deepEqual=function(t,e,r){d(t,e,!1)||y(t,e,r,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(t,e,r){d(t,e,!0)||y(t,e,r,"deepStrictEqual",s.deepStrictEqual)},s.notDeepEqual=function(t,e,r){d(t,e,!1)&&y(t,e,r,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=v,s.strictEqual=function(t,e,r){t!==e&&y(t,e,r,"===",s.strictEqual)},s.notStrictEqual=function(t,e,r){t===e&&y(t,e,r,"!==",s.notStrictEqual)},s.throws=function(t,e,r){w(!0,t,e,r)},s.doesNotThrow=function(t,e,r){w(!1,t,e,r)},s.ifError=function(t){if(t)throw t},s.strict=e(O,s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict;var A=Object.keys||function(t){var e=[];for(var r in t)o.call(t,r)&&e.push(r);return e};
},{"object-assign":"J4Nk","util/":"XOAc"}],"Qmf2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mobiusTransformation=exports.complexSubtraction=exports.complexAddition=exports.complexDivision=exports.complexMultiplication=void 0;var o=require("assert"),r=require("./coordinate-systems");function t(o,t){return r.polar(o.r*t.r,o.p+t.p)}function i(t,i){return o(0!==i.r,"complexDivision: division by 0."),r.polar(t.r/i.r,t.p-i.p)}function e(o,t){return r.cartesianCompat.toPolar(r.cartesianAddition(r.cartesianCompat.fromPolar(o),r.cartesianCompat.fromPolar(t)))}function n(o,t){return r.cartesianCompat.toPolar(r.cartesianSubtraction(r.cartesianCompat.fromPolar(o),r.cartesianCompat.fromPolar(t)))}function a(o,r,n,a){return function(p){return i(e(t(o,p),r),e(t(n,p),a))}}exports.complexMultiplication=t,exports.complexDivision=i,exports.complexAddition=e,exports.complexSubtraction=n,exports.mobiusTransformation=a;
},{"assert":"DlZn","./coordinate-systems":"CamE"}],"mwNW":[function(require,module,exports) {
"use strict";function r(r,a){return n(r)||e(r,a)||o(r,a)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(r,t){if(r){if("string"==typeof r)return a(r,t);var o=Object.prototype.toString.call(r).slice(8,-1);return"Object"===o&&r.constructor&&(o=r.constructor.name),"Map"===o||"Set"===o?Array.from(r):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?a(r,t):void 0}}function a(r,t){(null==t||t>r.length)&&(t=r.length);for(var o=0,a=new Array(t);o<t;o++)a[o]=r[o];return a}function e(r,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r)){var o=[],a=!0,e=!1,n=void 0;try{for(var i,p=r[Symbol.iterator]();!(a=(i=p.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(c){e=!0,n=c}finally{try{a||null==p.return||p.return()}finally{if(e)throw n}}return o}}function n(r){if(Array.isArray(r))return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getReflection=exports.getTranslation=exports.poincareDiskMetric=exports.getGeodesicFromTwoPoints=exports.poincareRadiusToPolarRadius=exports.polarRadiusToPoincareRadius=void 0;var i=require("assert"),p=require("~utils/math"),c=require("./complex"),s=require("./coordinate-systems");function l(r){return i(0<=r&&r<1,"poincareDiskCompat: radius `r` is out of range [0, 1)."),Math.acosh((1+Math.pow(r,2))/(1-Math.pow(r,2)))}function u(r){var t=Math.cosh(r);return Math.sqrt((t-1)/(t+1))}function m(r,t){i(!s.polarEq.equal(r,t),"getGeodesicFromTwoPoints: given two points are the same.");var o=p.clampMod(-Math.PI/2,Math.PI/2);if(p.eq(r.r,0))return m(t,r);if(p.eq(t.r,0))return i(0!==r.r,"getGeodesicFromTwoPoints: given two points are the same."),{type:"linear",angle:o(r.p)};if(p.eq(o(r.p),o(t.p)))return{type:"linear",angle:o(r.p)};if(r.r<t.r)return m(t,r);var a=s.polar(1/r.r,r.p),e=s.cartesianCompat.fromPolar(r),n=h(e,s.cartesianCompat.fromPolar(t),s.cartesianCompat.fromPolar(a)),c=Math.hypot(n.x-e.x,n.y-e.y);return{type:"circular",center:s.cartesianCompat.toPolar(n),radius:c}}function h(r,t,o){var a=r.x,e=r.y,n=t.x,i=t.y,p=o.x,c=o.y,l=2*(a-n)*(e-c)-2*(a-p)*(e-i),u=((Math.pow(a,2)+Math.pow(e,2)-Math.pow(n,2)-Math.pow(i,2))*(e-c)-(Math.pow(a,2)+Math.pow(e,2)-Math.pow(p,2)-Math.pow(c,2))*(e-i))/l,m=((a-n)*(Math.pow(a,2)+Math.pow(e,2)-Math.pow(p,2)-Math.pow(c,2))-(a-p)*(Math.pow(a,2)+Math.pow(e,2)-Math.pow(n,2)-Math.pow(i,2)))/l;return s.cartesian(u,m)}function f(r,t){if(s.poincareDiskEq.equal(r,t))return 0;var o=s.coordinateConversion(s.poincareDiskCompat,s.polarCompat)(r),a=s.coordinateConversion(s.poincareDiskCompat,s.polarCompat)(t),e=s.coordinateConversion(s.poincareDiskCompat,s.cartesianCompat)(r),n=s.coordinateConversion(s.poincareDiskCompat,s.cartesianCompat)(t),i=2*Math.pow(s.cartesianMetric(e,n),2)/(1-Math.pow(o.r,2))/(1-Math.pow(a.r,2));return Math.acosh(1+i)}function M(r,t){var o=m(r,t);if("linear"===o.type)return[s.polar(1,o.angle),s.polar(1,o.angle+Math.PI)];var a=Math.abs(Math.asin(o.center.r/Math.sqrt(1+Math.pow(o.radius,2)))-Math.atan2(1,o.radius));return[s.polar(1,o.center.p+a),s.polar(1,o.center.p-a)]}function d(t,o){var a=s.polar(1,0),e=s.polar(0,0),n=s.polar(1,Math.PI);if(s.polarEq.equal(t,o))return c.mobiusTransformation(a,e,e,a);var i=r(M(t,o),2),p=i[0],l=i[1],u=c.complexDivision(c.complexAddition(c.complexMultiplication(o,c.complexSubtraction(c.complexSubtraction(t,p),l)),c.complexMultiplication(p,l)),c.complexSubtraction(t,o)),m=c.complexMultiplication(c.complexMultiplication(p,l),n),h=a,f=c.complexSubtraction(c.complexSubtraction(u,p),l);return c.mobiusTransformation(u,m,h,f)}function w(r,t){var o=m(r,t);return"linear"===o.type?function(r){return s.polar(r.r,2*o.angle-r.p)}:function(r){var t=s.cartesianCompat.toPolar(s.cartesianSubtraction(s.cartesianCompat.fromPolar(r),s.cartesianCompat.fromPolar(o.center))),a=s.polar(Math.pow(o.radius,2)/t.r,t.p);return s.cartesianCompat.toPolar(s.cartesianAddition(s.cartesianCompat.fromPolar(a),s.cartesianCompat.fromPolar(o.center)))}}exports.polarRadiusToPoincareRadius=l,exports.poincareRadiusToPolarRadius=u,exports.getGeodesicFromTwoPoints=m,exports.poincareDiskMetric=f,exports.getTranslation=d,exports.getReflection=w;
},{"assert":"DlZn","~utils/math":"XpGZ","./complex":"Qmf2","./coordinate-systems":"CamE"}],"CamE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.poincareDiskEq=exports.poincareDiskCompat=exports.poincareDisk=exports.cartesianMetric=exports.cartesianSubtraction=exports.cartesianAddition=exports.cartesianEq=exports.cartesianCompat=exports.cartesian=exports.polarEq=exports.polarCompat=exports.polar=exports.coordinateConversion=void 0;var r=require("fp-ts/lib/function"),t=require("~utils/math"),o=require("./poincare-disk");function e(t,o){return r.flow(t.toPolar,o.fromPolar)}function a(r,o){return{type:"polar",r:r,p:t.clampMod(-Math.PI,Math.PI)(o)}}function n(r,t){return{type:"cartesian",x:r,y:t}}function i(r,t){return n(r.x+t.x,r.y+t.y)}function p(r,t){return n(r.x-t.x,r.y-t.y)}function s(r,t){return Math.hypot(r.x-t.x,r.y-t.y)}function c(r,o){return{type:"poincare-disk",d:r,p:t.clampMod(-Math.PI,Math.PI)(o)}}exports.coordinateConversion=e,exports.polar=a,exports.polarCompat={fromPolar:r.identity,toPolar:r.identity},exports.polarEq={equal:function(r,o){return t.eq(r.r,0)&&t.eq(o.r,0)||t.eq(r.r,o.r)&&t.eq(r.p,o.p)}},exports.cartesian=n,exports.cartesianCompat={fromPolar:function(r){var t=r.r,o=r.p;return n(t*Math.cos(o),t*Math.sin(o))},toPolar:function(r){var t=r.x,o=r.y;return a(Math.hypot(t,o),Math.atan2(o,t))}},exports.cartesianEq={equal:function(r,o){return t.eq(r.x,o.x)&&t.eq(r.y,o.y)}},exports.cartesianAddition=i,exports.cartesianSubtraction=p,exports.cartesianMetric=s,exports.poincareDisk=c,exports.poincareDiskCompat={fromPolar:function(r){var t=r.r,e=r.p;return c(o.polarRadiusToPoincareRadius(t),e)},toPolar:function(r){var t=r.d,e=r.p;return a(o.poincareRadiusToPolarRadius(t),e)}},exports.poincareDiskEq={equal:function(r,o){return t.eq(r.d,0,.001)&&t.eq(o.d,0,.001)||t.eq(r.d,o.d,1e-6)&&t.eq(r.p,o.p,1e-6)}};
},{"fp-ts/lib/function":"wjrn","~utils/math":"XpGZ","./poincare-disk":"mwNW"}],"mjL3":[function(require,module,exports) {
"use strict";function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===n?e(0,r):Array(n-r).fill(0).map(function(e,n){return n+r})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.range=void 0,exports.range=e;
},{}],"QDym":[function(require,module,exports) {
"use strict";function e(e){return i(e)||r(e)||n(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function r(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function i(e){if(Array.isArray(e))return o(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Cycle=void 0;var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];a(this,t),this.inner=e}return l(t,[{key:"get",value:function(e){if(e<0||e>=this.inner.length){var t=e-this.inner.length*Math.floor(e/this.inner.length);return this.get(t)}return this.inner[e]}},{key:"length",get:function(){return this.inner.length}},{key:"rotated",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(t<0||t>=this.inner.length){var n=t-this.inner.length*Math.floor(t/this.inner.length);return this.rotated(n)}return[].concat(e(this.inner.slice(t)),e(this.inner.slice(0,t)))}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.inner=this.rotated(e),this.inner}},{key:"reversed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.inner.slice(0).reverse();return new t(n).rotated(2*(length-e)-1)}},{key:"reverse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.inner=this.reversed(e),this.inner}}]),t}();exports.Cycle=s;
},{}],"sJnU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderConsecutiveArcs=exports.renderArc=exports.renderPoint=void 0;var r=require("~utils/math"),t=require("./coordinate-systems"),a=require("./poincare-disk");function e(r,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",o=t.coordinateConversion(a,t.cartesianCompat)(r);return"".concat(100*o.x).concat(e).concat(100*-o.y)}function o(o,n){var c=a.getGeodesicFromTwoPoints(o,n);if("linear"===c.type)return"L ".concat(e(n,t.polarCompat," "));var i=t.cartesianAddition(t.cartesianCompat.fromPolar(o),t.cartesianCompat.fromPolar(n)),s=t.cartesian(i.x/2,i.y/2),p=t.cartesianCompat.toPolar(t.cartesianSubtraction(s,t.cartesianCompat.fromPolar(c.center))),u=t.cartesianCompat.toPolar(t.cartesianSubtraction(t.cartesianCompat.fromPolar(n),t.cartesianCompat.fromPolar(o))),l=r.clampMod(-Math.PI,Math.PI)(u.p-p.p);return"A ".concat(100*c.radius," ").concat(100*c.radius," 0 0 ").concat(l>=0?0:1," ").concat(e(n,t.polarCompat," "))}function n(){for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return t.length<=1?"":Array(t.length-1).fill(0).map(function(r,a){return o(t[a],t[a+1])}).join(" ")}exports.renderPoint=e,exports.renderArc=o,exports.renderConsecutiveArcs=n;
},{"~utils/math":"XpGZ","./coordinate-systems":"CamE","./poincare-disk":"mwNW"}],"ozjb":[function(require,module,exports) {
"use strict";function e(e){return n(e)||i(e)||r(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function i(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function n(e){if(Array.isArray(e))return s(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.HyperbolicRegularTiling=exports.poincareDistanceBetweenAdjacentTiles=exports.getTileInnerRadius=exports.getTileOuterRadius=void 0;var l=require("fp-ts/lib/function"),u=require("~utils/array"),p=require("~utils/cycle"),v=require("./arc"),f=require("./coordinate-systems"),h=require("./poincare-disk");function d(e,t){var r=Math.tan(Math.PI/2-Math.PI/t),i=Math.tan(Math.PI/e);return Math.sqrt((r-i)/(r+i))}function g(e,t){var r=d(e,t),i=Math.PI/2-Math.PI/t,n=Math.tan(i)*((r+1/r)/2-r);return h.polarRadiusToPoincareRadius(Math.hypot(r+n/Math.tan(i),n)-n/Math.cos(i))}function m(e,t){return 2*g(e,t)}exports.getTileOuterRadius=d,exports.getTileInnerRadius=g,exports.poincareDistanceBetweenAdjacentTiles=m;var y=function(){function t(e,r,i){var n=this;o(this,t),this.p=e,this.q=r,this.g=i,this.tiles=[],this.crossings=[],this.vertices=[],this._getVertexIndex=function(e){var t=n.vertices.findIndex(function(t){return f.poincareDiskEq.equal(t,e)});return-1!==t?t:(n.vertices.push(e),n.vertices.length-1)},this._addCenterTile()}return c(t,[{key:"getTile",value:function(e){var t;return null!==(t=this.tiles[e])&&void 0!==t?t:null}},{key:"addTile",value:function(e){return!this.tiles.some(function(t){return f.poincareDiskEq.equal(t.center,e.center)})&&(this.tiles.push(e),!0)}},{key:"_addCenterTile",value:function(){var e=this,t=u.range(this.p);this.vertices=t.map(function(t){return f.poincareDiskCompat.fromPolar(f.polar(d(e.p,e.q),2*Math.PI/e.p*t))});var r={index:0,p:this.p,q:this.q,level:0,center:f.poincareDisk(0,0),vertexIndices:new p.Cycle(t)};this.addTile(r)}},{key:"addReflection",value:function(t){var r,i=this,n=this.tiles.length-1,s=this.tiles[n],o=s.vertexIndices.get(0),a=s.vertexIndices.get(1),c=this.vertices[o],v=this.vertices[a],d=h.getReflection(f.poincareDiskCompat.toPolar(c),f.poincareDiskCompat.toPolar(v)),g=s.vertexIndices.inner.slice(2).map(l.flow(function(e){return i.vertices[e]},f.poincareDiskCompat.toPolar,d,f.poincareDiskCompat.fromPolar)),m=new p.Cycle([o,a].concat(e(g.map(this._getVertexIndex)))),y={ends:[n,this.tiles.length],edge:[o,a]};this.crossings.push(y),m.reverse(1);for(var D={index:this.tiles.length,p:this.p,q:this.q,level:s.level+(t?1:0),center:l.pipe(s.center,f.poincareDiskCompat.toPolar,d,f.poincareDiskCompat.fromPolar),vertexIndices:m},I=!1;;){var x=null!==(r=this.tiles.filter(function(e){return[D.level-1,D.level].includes(e.level)}).find(function(e){return e.vertexIndices.inner.includes(m.get(0))&&e.vertexIndices.inner.includes(m.get(1))}))&&void 0!==r?r:null;if(null===x)break;x.level===D.level?I=!0:function(){var e=[m.get(0),m.get(1)],t=new p.Cycle(x.vertexIndices.reversed());t.rotate(t.inner.indexOf(e[1])-D.vertexIndices.inner.indexOf(e[1]));var r=h.getReflection(f.poincareDiskCompat.toPolar(i.vertices[e[0]]),f.poincareDiskCompat.toPolar(i.vertices[e[1]]));u.range(D.vertexIndices.length).forEach(function(e){if(t.get(e)!==D.vertexIndices.get(e)){var n=l.pipe(i.vertices[t.get(e)],f.poincareDiskCompat.toPolar,r,f.poincareDiskCompat.fromPolar);i.vertices[D.vertexIndices.get(e)]=n}})}();var k={ends:[x.index,D.index],edge:[m.get(0),m.get(1)]};this.crossings.push(k),m.rotate(-1)}return this.tiles.push(D),I}},{key:"level",get:function(){return this.tiles.slice(-1)[0].level},set:function(e){if(this.level<=e)for(var t=this.level;t<e;t++)this._addLevel();else this.tiles=this.tiles.filter(function(t){return t.level<=e})}},{key:"_addLevel",value:function(){for(var e=!0,t=!1;!t;)t=this.addReflection(e),e&&(e=!1)}},{key:"createPaths",value:function(e){this.tiles.forEach(function(t,r){if(!(r<e.children.length)){var i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("fill","transparent"),i.setAttribute("stroke","grey"),i.setAttribute("stroke-width","1pt"),i.setAttribute("vector-effect","non-scaling-stroke"),e.appendChild(i)}}),this.tiles.forEach(function(t,r){e.children.item(r).addEventListener("mousedown",function(){console.log(r)})})}},{key:"render",value:function(r){var i=this;this.createPaths(this.g);var n=l.flow(f.poincareDiskCompat.toPolar,h.getTranslation(f.poincareDiskCompat.toPolar(r),f.polar(0,0))),s=l.flow(n,f.poincareDiskCompat.fromPolar);this.tiles.forEach(function(o,a){var c=i.g.children.item(a),l=h.poincareDiskMetric(o.center,r);if(l>t.DISTANCE_RENDER_THRESHOLD)c.setAttribute("style","opacity: 0");else{if(l>t.DISTANCE_BLUR_THRESHOLD){var u=(t.DISTANCE_RENDER_THRESHOLD-l)/(t.DISTANCE_RENDER_THRESHOLD-t.DISTANCE_BLUR_THRESHOLD);c.setAttribute("style","opacity: ".concat(u))}else c.setAttribute("style","opacity: 1");c.setAttribute("d","M ".concat(v.renderPoint(s(i.vertices[o.vertexIndices.get(0)]),f.poincareDiskCompat," "),"\n        ").concat(v.renderConsecutiveArcs.apply(v,e(o.vertexIndices.inner.map(function(e){return i.vertices[e]}).map(n)).concat([n(i.vertices[o.vertexIndices.get(0)])]))))}})}}]),t}();exports.HyperbolicRegularTiling=y,y.DISTANCE_RENDER_THRESHOLD=5.5,y.DISTANCE_BLUR_THRESHOLD=2.5;
},{"fp-ts/lib/function":"wjrn","~utils/array":"mjL3","~utils/cycle":"QDym","./arc":"sJnU","./coordinate-systems":"CamE","./poincare-disk":"mwNW"}],"QCba":[function(require,module,exports) {
"use strict";function e(e,r){return i(e)||o(e,r)||t(e,r)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function t(e,n){if(e){if("string"==typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function o(e,n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(u){o=!0,i=u}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return t}}function i(e){if(Array.isArray(e))return e}Object.defineProperty(exports,"__esModule",{value:!0});var a=require("fp-ts/lib/function"),c=require("~pointer"),u=require("~renderer/coordinate-systems"),l=require("~renderer/poincare-disk"),s=require("~renderer/tiling"),d=!1,p=0,y=70;window.onload=E;var f=new c.PointerManager;f.addEventListener("pointerpositionchange",function(e){document.getElementById("cursor").style.left="".concat(e.x-12.88333,"px"),document.getElementById("cursor").style.top="".concat(e.y-12.88333,"px")}),f.addEventListener("pointerlockchange",function(e){console.log("LOCK CHANGED",e.locked)}),f.addEventListener("pointerclick",function(e){console.log("CLICKED",e.x,e.y,e.buttons)});var m=u.poincareDisk(0,0),g=u.poincareDisk(0,0),v=u.cartesian(0,0),h=document.getElementById("polygons"),b=new s.HyperbolicRegularTiling(5,5,h);function w(e,n,t){var r=document.getElementById("renderer").getBoundingClientRect(),o=(e-r.x-p)/(r.width-2*p)*100-v.x-50,i=(n-r.y-p)/(r.height-2*p)*100-v.y-50,c=u.cartesianCompat.toPolar(u.cartesian(o,i)),s=Object.assign(Object.assign({},c),{r:Math.min(c.r,y/2)}),d=l.getTranslation(u.polar(0,0),u.poincareDiskCompat.toPolar(g)),f=a.pipe(u.poincareDisk(Math.min(t,s.r/y*2*(t+1)),-s.p),u.poincareDiskCompat.toPolar,d,u.poincareDiskCompat.fromPolar),m=u.cartesianCompat.fromPolar(u.polar(s.r,s.p));return[f,a.pipe(m,function(e){return u.cartesianAddition(e,v)},function(e){return u.cartesian(2*e.x-y,2*e.y-y)})]}function x(e){document.getElementById("inner-group").setAttribute("x","".concat(e.x)),document.getElementById("inner-group").setAttribute("y","".concat(e.y))}function E(){A(),window.addEventListener("resize",A),window.oncontextmenu=function(){return!1},b.render(m),f.addEventListener("pointerpositionchange",function(n){if(!d){var t=e(w(n.x,n.y,b.level+2),2),r=t[0];x(t[1]),m=r,b.render(m)}}),document.addEventListener("keyup",function(e){" "===e.key?P():"z"===e.key&&(C(),k())})}function k(){var n=e(w(f.x,f.y,b.level+2),2),t=n[0];x(n[1]),m=t,b.render(m)}function C(){g=u.poincareDisk(0,0),v=u.cartesian(0,0)}function P(){f.locked||f.lock();var e=document.getElementById("renderer").clientWidth,n=u.cartesian(window.innerWidth/2,window.innerHeight/2),t=u.cartesianSubtraction(u.cartesian(f.x,f.y),n),r=u.cartesianCompat.toPolar(t),o=u.polar(r.r/e*100,r.p);if(o.r>y/2){o=u.polar(y/2,r.p);var i=a.pipe(u.polar(o.r/100*e,r.p),u.cartesianCompat.fromPolar,function(e){return u.cartesianAddition(e,n)});f.setPointerPosition(i.x,i.y)}v=u.cartesianCompat.fromPolar(o),g=m}function A(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}b.level=2;
},{"fp-ts/lib/function":"wjrn","~pointer":"hxGZ","~renderer/coordinate-systems":"CamE","~renderer/poincare-disk":"mwNW","~renderer/tiling":"ozjb"}]},{},["QCba"], null)
//# sourceMappingURL=/app.b129151e.js.map